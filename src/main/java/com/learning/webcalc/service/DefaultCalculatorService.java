package com.learning.webcalc.service;import com.learning.webcalc.service.api.CalculatorService;import com.learning.webcalc.service.api.History;import com.learning.webcalc.service.api.HistoryService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import java.util.List;@Servicepublic class DefaultCalculatorService implements CalculatorService{    private final HistoryService historyService;    private final ExpressionProcessor expressionProcessor;    @Autowired    public DefaultCalculatorService(HistoryService historyService, ExpressionProcessor expressionProcessor)    {        this.historyService = historyService;        this.expressionProcessor = expressionProcessor;    }    @Override    public double calculate(String expression)    {        double result = calculateResult(expression);        historyService.store(expression, result);        return result;    }    public History getHistory()    {        return historyService.getHistory();    }    private double calculateResult(String expression)    {   // TODO: flow with Optional        expression = expressionProcessor.clean(expression);        List<String> tokens = expressionProcessor.tokenize(expression);        tokens = expressionProcessor.toReversePolishNotation(tokens);        double value = expressionProcessor.calculateReversePolishNotation(tokens);        return value;    }}